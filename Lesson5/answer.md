## 一种POS+BFT的算法设计
- 首先，限定固定数量**M**的出块节点，比如说21个。在所有节点，产生一个固定顺序出块节点列表。
- 然后，设计一种假随机的确定性算法，保证在所有节点，同样的输入产生同样的输出，用于生成一个模21的索引，从而决定哪个节点出块。
    - 例如：输入：block number 和 parent block hash
- 为防止矿工通过控制parent block hash, 控制下一轮的出块节点。
    - 一，将通过治理结构。详见下一节。
    - 二，在算法中设定每一轮的出块节点，不得参与未来**N**个块出块, 比如说6个块。
    - 三，在算法中检查，每M+N个区块中，所有M个出块节点都要至少产生一个区块。
- 被选中的节点打包从上一个出块时间+固定出块时间隔之内的所有交易，然后广播到全网。
    - 其它节点只接收来自被选中节点的最新块。
    - 注：出块时间需要大于M个节点在网络状态良好的情况下数据同步的时间


## 治理结构
- 因为设计的算法是固定出块节点，所以选择链下治理的思路。
- 首先，需要明确知道**M**个出块结点的身份。
- 考虑Nothing at Stake 问题，每个结点需要抵压一定数量的token,在官方的合约上。
    - 奖励方案，因为是轮流出块，所以每轮出块，所有参与轮循的出块节点（即不包括在过去生产区块的**N**个节点）都有奖励。
    - 惩罚情况:
        - 节点下线（遭受DOS攻击怎么办？）
        - 出块节点打包的交易数 < 大多数结点txpool里在这一时间间隔的交易数
- 考虑Long range attack的问题，永远选择短链。
    - (还不确定，现在的设计如何发动长链攻击？)
    - 选择短链的原因是这样比较保险。
- 设置K个备选节点，保证当有节点下线的情况下，会有其它节点补上，满足M个出块节点的要求。
    - 这个信息需要全部节点知晓（通过p2p协议保证？）


# 疑问
- 可以要求所有节点的UTC时间与格林尼治时间保持一致吗？
- 如果节点是因遭受DOS攻击下线，该如何处理？